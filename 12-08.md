# Домашнее задание к занятию 12.8 "Резервное копирование баз данных - Сенибратов Вячеслав"

Домашнее задание выполните в Google Docs и отправьте в личном кабинете на проверку ссылку на ваш документ.

Название файла должно содержать номер лекции и фамилию студента. Пример названия: "12.8 Резервное копирование баз данных - Александр Александров"

Перед тем как выслать ссылку, убедитесь, что ее содержимое не является приватным (открыто на просмотр всем, у кого есть ссылка). Если необходимо прикрепить дополнительные ссылки, просто добавьте их в свой Google Docs.

Любые вопросы по решению задач задавайте в чате учебной группы.

---

### Задание 1. Резервное копирование

### Кейс
Финансовая компания решила увеличить надежность работы БД и их резервного копирования. 

Необходимо описать, какие варианты резервного копирования подходят в случаях: 

1.1 Необходимо восстанавливать данные в полном объеме за предыдущий день.
```
Как один из вариантов, full backup в ночь. Принудительно делать блокровку данных на 02:00, отключать всех от резервируемых данных. 
В случае неообходимости возможно оперативное востановление на предыдущие сутки на 02:00.
```
```
// И не хранить резервные копии на томже носители что и резервируемые данные!!! //
```
1.2 Необходимо восстанавливать данные за час до предполагаемой поломки.
```
В данном случае возможно обойтись например теневымикопиями. Делать снапшоп каждый час. Время занимает значительно 
меньше относительно full backup и места для хранения необходимо меньше. 
```

//И не хранить резервные копии на томже носители что и резервируемые данные!!!// 

1.3* Возможен ли кейс, когда при поломке базы происходило моментальное переключение на работающую/починеную БД?

*Приведите ответ в свободной форме.*

---

### Задание 2. PostgreSQL

2.1 С помощью официальной документации приведите пример команды резервирования данных и восстановления БД (pgdump/pgrestore).
```sql
$ pg_dump mydb > db.sql
$ pg_restore -d newdb db.dump
```
2.1* Возможно ли автоматизировать этот процесс? Если да, то как?

*Приведите ответ в свободной форме.*

---

### Задание 3. MySql

3.1 С помощью официальной документации приведите пример команды инкрементного резервного копирования базы данных MySql. 
```sql
mysqlbackup --defaults-file=/home/dbadmin/my.cnf \
  --incremental --incremental-base=history:last_backup \
  --backup-dir=/home/dbadmin/temp_dir \
  --backup-image=incremental_image1.bi \
   backup-to-image
```
3.1* В каких случаях использование реплики будет давать преимущество по сравнению с обычным резервным копированием?

*Приведите ответ в свободной форме.*

---

Задания,помеченные звездочкой * - дополнительные (не обязательные к выполнению) и никак не повлияют на получение вами зачета по этому домашнему заданию. Вы можете их выполнить, если хотите глубже и/или шире разобраться в материале.
